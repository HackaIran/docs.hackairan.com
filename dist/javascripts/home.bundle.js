!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./client/bundles/home/index.js")}({"./client/bundles/home/index.js":
/*!**************************************!*\
  !*** ./client/bundles/home/index.js ***!
  \**************************************/
/*! no static exports found */function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initializeSearchBox(),this.initializeDocumentsList(),this.initializeHotKeys(),this.initializeCategories(),this.initializeTags()}return r(e,[{key:"initializeHotKeys",value:function(){var e=this;window.addEventListener("keydown",function(t){var n=["Digit1","Digit2","Digit3"];t.altKey&&n.includes(t.code)&&e.columnsPreview(parseInt(n.indexOf(t.code))+1)})}},{key:"columnsPreview",value:function(e){for(var t=1;t<=3;t++)$("body").classList.remove("divide-"+t);$("body").classList.add("divide-"+e)}},{key:"initializeDocumentsList",value:function(){var e=$$("body > div.column.titles > ul > li"),t=this,n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.onclick=function(){var e=this.getAttribute("data-id");document.querySelector(".article-loading").style.display="block",t.selectDocument(e),t.loadDocument(e)}}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"initializeCategories",value:function(){var e=this,t=document.querySelectorAll(".categories > li"),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.onclick=function(){var t=this.getAttribute("data-id");document.querySelector(".articles-loading").style.display="block",e.filterByCategory(t)}}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"initializeTags",value:function(){var e=this,t=document.querySelectorAll(".hashtags > li"),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.onclick=function(){var t=this.innerHTML;document.querySelector(".articles-loading").style.display="block",e.filterByTag(t)}}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"selectDocument",value:function(e){var t=$$("body > div.column.titles > ul > li"),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;l.getAttribute("data-id")===e?l.classList.add("active"):l.classList.remove("active")}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"initializeSearchBox",value:function(){this.searchBox=$(".search-documents"),this.searchBox.onchange=this.searchBox.onkeyup=this.doSearch.bind(this)}},{key:"doSearch",value:function(){var e=this.searchBox.value.toLowerCase(),t=$$("body > div.column.titles > ul > li"),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.classList.remove("hidden")}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}var l=!0,c=!1,d=void 0;try{for(var u,s=t[Symbol.iterator]();!(l=(u=s.next()).done);l=!0){var y=u.value;y.innerText.toLowerCase().includes(e)||y.classList.add("hidden")}}catch(e){c=!0,d=e}finally{try{!l&&s.return&&s.return()}finally{if(c)throw d}}}},{key:"loadDocument",value:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);document.querySelector(".article-loading").style.display="none",document.querySelector(".article-title").innerHTML=e.title,document.querySelector(".article-content").innerHTML=e.text}},t.open("GET","/getTextByUniqueUrl/"+e,!0),t.send()}},{key:"filterByCategory",value:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);document.querySelector(".column.titles > ul").innerHTML="";var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,l=document.createElement("li"),c=document.createElement("h3"),d=document.createTextNode(o.name);c.appendChild(d);var u=document.createElement("span"),s=document.createElement("time"),y=document.createTextNode(o.modifiedAt);s.appendChild(y);var m=document.createElement("span"),h=document.createTextNode(" | ");m.appendChild(h);var p=document.createElement("span"),v=document.createTextNode(o.author);p.appendChild(v),u.appendChild(s),u.appendChild(m),u.appendChild(p);var f=document.createElement("p"),x=document.createTextNode(o.summary);f.appendChild(x),l.appendChild(c),l.appendChild(u),l.appendChild(f),l.setAttribute("data-id",o.uniqueUrl),document.querySelector(".column.titles > ul").appendChild(l)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}document.querySelector(".articles-loading").style.display="none"}},t.open("GET","/category/"+e,!0),t.send()}},{key:"filterByTag",value:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText);document.querySelector(".column.titles > ul").innerHTML="";var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,l=document.createElement("li"),c=document.createElement("h3"),d=document.createTextNode(o.name);c.appendChild(d);var u=document.createElement("span"),s=document.createElement("time"),y=document.createTextNode(o.modifiedAt);s.appendChild(y);var m=document.createElement("span"),h=document.createTextNode(" | ");m.appendChild(h);var p=document.createElement("span"),v=document.createTextNode(o.author);p.appendChild(v),u.appendChild(s),u.appendChild(m),u.appendChild(p);var f=document.createElement("p"),x=document.createTextNode(o.summary);f.appendChild(x),l.appendChild(c),l.appendChild(u),l.appendChild(f),l.setAttribute("data-id",o.uniqueUrl),document.querySelector(".column.titles > ul").appendChild(l)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}document.querySelector(".articles-loading").style.display="none"}},t.open("GET","/tag/"+e,!0),t.send()}}]),e}())}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vY2xpZW50L2J1bmRsZXMvaG9tZS9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQXBwIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImluaXRpYWxpemVTZWFyY2hCb3giLCJpbml0aWFsaXplRG9jdW1lbnRzTGlzdCIsImluaXRpYWxpemVIb3RLZXlzIiwiaW5pdGlhbGl6ZUNhdGVnb3JpZXMiLCJpbml0aWFsaXplVGFncyIsIl90aGlzIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJkaWdpdHMiLCJhbHRLZXkiLCJpbmNsdWRlcyIsImNvZGUiLCJjb2x1bW5zUHJldmlldyIsInBhcnNlSW50IiwiaW5kZXhPZiIsInR5cGUiLCIkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwiYWxsTGlzdEl0ZW1zIiwiJCQiLCJ0aGF0IiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJvbmNsaWNrIiwidW5pcXVlVXJsIiwiZ2V0QXR0cmlidXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3R5bGUiLCJkaXNwbGF5Iiwic2VsZWN0RG9jdW1lbnQiLCJsb2FkRG9jdW1lbnQiLCJlcnIiLCJyZXR1cm4iLCJjYXRlZ29yaWVzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsIl9pZCIsImZpbHRlckJ5Q2F0ZWdvcnkiLCJ0YWdzIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMiLCJfZGlkSXRlcmF0b3JFcnJvcjMiLCJfaXRlcmF0b3JFcnJvcjMiLCJfc3RlcDMiLCJfaXRlcmF0b3IzIiwiaW5uZXJIVE1MIiwiZmlsdGVyQnlUYWciLCJpZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240IiwiX2RpZEl0ZXJhdG9yRXJyb3I0IiwiX2l0ZXJhdG9yRXJyb3I0IiwiX3N0ZXA0IiwiX2l0ZXJhdG9yNCIsIml0ZW0iLCJzZWFyY2hCb3giLCJvbmNoYW5nZSIsIm9ua2V5dXAiLCJkb1NlYXJjaCIsImJpbmQiLCJxdWVyeSIsInRvTG93ZXJDYXNlIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUiLCJfZGlkSXRlcmF0b3JFcnJvcjUiLCJfaXRlcmF0b3JFcnJvcjUiLCJfc3RlcDUiLCJfaXRlcmF0b3I1IiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjYiLCJfZGlkSXRlcmF0b3JFcnJvcjYiLCJfaXRlcmF0b3JFcnJvcjYiLCJfc3RlcDYiLCJfaXRlcmF0b3I2IiwiaW5uZXJUZXh0IiwieGh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJ0aXRsZSIsInRleHQiLCJvcGVuIiwic2VuZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb243IiwiX2RpZEl0ZXJhdG9yRXJyb3I3IiwiX2l0ZXJhdG9yRXJyb3I3IiwiX3N0ZXA3IiwiX2l0ZXJhdG9yNyIsIm5ld0RvYyIsImNyZWF0ZUVsZW1lbnQiLCJuZXdEb2NUaXRsZSIsIm5ld0RvY1RpdGxlVGV4dCIsImNyZWF0ZVRleHROb2RlIiwiYXBwZW5kQ2hpbGQiLCJuZXdEb2NEZXRhaWxzIiwibmV3RG9jRGF0ZVRpbWUiLCJuZXdEb2NEYXRlVGltZURhdGEiLCJtb2RpZmllZEF0IiwibmV3RG9jRGV0YWlsU2VwcmF0b3IiLCJuZXdEb2NEU0RhdGEiLCJuZXdEb2NBdXRob3IiLCJuZXdEb2NBdXRob3JEYXRhIiwiYXV0aG9yIiwibmV3RG9jU3VtbWFyeSIsIm5ld0RvY1N1bW1hcnlEYXRhIiwic3VtbWFyeSIsInNldEF0dHJpYnV0ZSIsInRhZ05hbWUiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uOCIsIl9kaWRJdGVyYXRvckVycm9yOCIsIl9pdGVyYXRvckVycm9yOCIsIl9zdGVwOCIsIl9pdGVyYXRvcjgiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWpCLEdBQ0FZLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURrQixPQUFBLEtBSWpEcEIsRUFBQXFCLEVBQUEsU0FBQWxCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQW1CLFdB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R0E2QzVDMUYsU0FBU0MsY0FBYyxxQkFBcUJDLE1BQU1DLFFBQVUsU0FJcEUrQyxFQUFNVyxLQUFLLE1BQU8sUUFBVTBCLEdBQVMsR0FDckNyQyxFQUFNWSIsImZpbGUiOiIuL2phdmFzY3JpcHRzL2hvbWUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vY2xpZW50L2J1bmRsZXMvaG9tZS9pbmRleC5qc1wiKTtcbiIsImNsYXNzIEFwcCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNlYXJjaEJveCgpO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZURvY3VtZW50c0xpc3QoKTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVIb3RLZXlzKCk7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplQ2F0ZWdvcmllcygpO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVRhZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplSG90S2V5cyAoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkaWdpdHMgPSBbJ0RpZ2l0MScsICdEaWdpdDInLCAnRGlnaXQzJ107XHJcbiAgICAgICAgICAgIGlmIChlLmFsdEtleSAmJiBkaWdpdHMuaW5jbHVkZXMoZS5jb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zUHJldmlldyhwYXJzZUludChkaWdpdHMuaW5kZXhPZihlLmNvZGUpKSArIDEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNvbHVtbnNQcmV2aWV3ICh0eXBlKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMzsgaSsrKSAkKCdib2R5JykuY2xhc3NMaXN0LnJlbW92ZSgnZGl2aWRlLScgKyBpKTtcclxuICAgICAgICAkKCdib2R5JykuY2xhc3NMaXN0LmFkZCgnZGl2aWRlLScgKyB0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplRG9jdW1lbnRzTGlzdCAoKSB7XHJcbiAgICAgICAgY29uc3QgYWxsTGlzdEl0ZW1zID0gJCQoJ2JvZHkgPiBkaXYuY29sdW1uLnRpdGxlcyA+IHVsID4gbGknKTtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIGFsbExpc3RJdGVtcykge1xyXG4gICAgICAgICAgICBpdGVtLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHVuaXF1ZVVybCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZS1sb2FkaW5nJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICAgICAgICB0aGF0LnNlbGVjdERvY3VtZW50KHVuaXF1ZVVybClcclxuICAgICAgICAgICAgICAgIHRoYXQubG9hZERvY3VtZW50KHVuaXF1ZVVybClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQ2F0ZWdvcmllcygpe1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGxldCBjYXRlZ29yaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGVnb3JpZXMgPiBsaScpXHJcbiAgICAgICAgZm9yKGxldCBpdGVtIG9mIGNhdGVnb3JpZXMpe1xyXG4gICAgICAgICAgICBpdGVtLm9uY2xpY2sgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgbGV0IF9pZCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZXMtbG9hZGluZycpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5maWx0ZXJCeUNhdGVnb3J5KF9pZClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplVGFncygpe1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGxldCB0YWdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhhc2h0YWdzID4gbGknKVxyXG4gICAgICAgIGZvcihsZXQgaXRlbSBvZiB0YWdzKXtcclxuICAgICAgICAgICAgaXRlbS5vbmNsaWNrID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gdGhpcy5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZXMtbG9hZGluZycpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5maWx0ZXJCeVRhZyhuYW1lKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdERvY3VtZW50IChpZCkge1xyXG4gICAgICAgIGNvbnN0IGFsbExpc3RJdGVtcyA9ICQkKCdib2R5ID4gZGl2LmNvbHVtbi50aXRsZXMgPiB1bCA+IGxpJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBhbGxMaXN0SXRlbXMpIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVTZWFyY2hCb3ggKCkge1xyXG4gICAgICAgIHRoaXMuc2VhcmNoQm94ID0gJCgnLnNlYXJjaC1kb2N1bWVudHMnKTtcclxuICAgICAgICB0aGlzLnNlYXJjaEJveC5vbmNoYW5nZSA9IHRoaXMuc2VhcmNoQm94Lm9ua2V5dXAgPSB0aGlzLmRvU2VhcmNoLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZG9TZWFyY2ggKCkge1xyXG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hCb3gudmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBjb25zdCBhbGxMaXN0SXRlbXMgPSAkJCgnYm9keSA+IGRpdi5jb2x1bW4udGl0bGVzID4gdWwgPiBsaScpO1xyXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgYWxsTGlzdEl0ZW1zKSBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgYWxsTGlzdEl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmICghaXRlbS5pbm5lclRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpIGl0ZW0uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvYWREb2N1bWVudCh1bmlxdWVVcmwpIHtcclxuICAgICAgICB2YXIgeGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB4aHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gNCAmJiB0aGlzLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIGxldCByZXMgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlLWxvYWRpbmcnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGUtdGl0bGUnKS5pbm5lckhUTUwgPSByZXMudGl0bGU7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZS1jb250ZW50JykuaW5uZXJIVE1MID0gcmVzLnRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHhodHRwLm9wZW4oXCJHRVRcIiwgXCIvZ2V0VGV4dEJ5VW5pcXVlVXJsL1wiICsgdW5pcXVlVXJsLCB0cnVlKTtcclxuICAgICAgICB4aHR0cC5zZW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsdGVyQnlDYXRlZ29yeShfaWQpe1xyXG4gICAgICAgIHZhciB4aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHhodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0ICYmIHRoaXMuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlcyA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbHVtbi50aXRsZXMgPiB1bCcpLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiByZXMpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RG9jID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RvY1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdEb2NUaXRsZVRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpdGVtLm5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RG9jVGl0bGUuYXBwZW5kQ2hpbGQobmV3RG9jVGl0bGVUZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RvY0RldGFpbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RvY0RhdGVUaW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGltZScpXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RvY0RhdGVUaW1lRGF0YSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGl0ZW0ubW9kaWZpZWRBdClcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2NEYXRlVGltZS5hcHBlbmRDaGlsZChuZXdEb2NEYXRlVGltZURhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RG9jRGV0YWlsU2VwcmF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RG9jRFNEYXRhID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyB8ICcpXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RG9jRGV0YWlsU2VwcmF0b3IuYXBwZW5kQ2hpbGQobmV3RG9jRFNEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RvY0F1dGhvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdEb2NBdXRob3JEYXRhID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaXRlbS5hdXRob3IpXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RG9jQXV0aG9yLmFwcGVuZENoaWxkKG5ld0RvY0F1dGhvckRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2NEZXRhaWxzLmFwcGVuZENoaWxkKG5ld0RvY0RhdGVUaW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2NEZXRhaWxzLmFwcGVuZENoaWxkKG5ld0RvY0RldGFpbFNlcHJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2NEZXRhaWxzLmFwcGVuZENoaWxkKG5ld0RvY0F1dGhvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdEb2NTdW1tYXJ5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdEb2NTdW1tYXJ5RGF0YSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGl0ZW0uc3VtbWFyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RG9jU3VtbWFyeS5hcHBlbmRDaGlsZChuZXdEb2NTdW1tYXJ5RGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvYy5hcHBlbmRDaGlsZChuZXdEb2NUaXRsZSlcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2MuYXBwZW5kQ2hpbGQobmV3RG9jRGV0YWlscylcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2MuYXBwZW5kQ2hpbGQobmV3RG9jU3VtbWFyeSlcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2Muc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaXRlbS51bmlxdWVVcmwpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2x1bW4udGl0bGVzID4gdWwnKS5hcHBlbmRDaGlsZChuZXdEb2MpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcnRpY2xlcy1sb2FkaW5nJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHhodHRwLm9wZW4oXCJHRVRcIiwgXCIvY2F0ZWdvcnkvXCIgKyBfaWQsIHRydWUpO1xyXG4gICAgICAgIHhodHRwLnNlbmQoKTtcclxuICAgIH1cclxuXHJcbiAgICBmaWx0ZXJCeVRhZyh0YWdOYW1lKXtcclxuXHJcbiAgICAgICAgdmFyIHhodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGh0dHAub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09IDQgJiYgdGhpcy5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29sdW1uLnRpdGxlcyA+IHVsJykuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHJlcyl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdEb2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RG9jVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RvY1RpdGxlVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGl0ZW0ubmFtZSlcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2NUaXRsZS5hcHBlbmRDaGlsZChuZXdEb2NUaXRsZVRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RG9jRGV0YWlscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RG9jRGF0ZVRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aW1lJylcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RG9jRGF0ZVRpbWVEYXRhID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaXRlbS5tb2RpZmllZEF0KVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvY0RhdGVUaW1lLmFwcGVuZENoaWxkKG5ld0RvY0RhdGVUaW1lRGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdEb2NEZXRhaWxTZXByYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdEb2NEU0RhdGEgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnIHwgJylcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2NEZXRhaWxTZXByYXRvci5hcHBlbmRDaGlsZChuZXdEb2NEU0RhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RG9jQXV0aG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RvY0F1dGhvckRhdGEgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpdGVtLmF1dGhvcilcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2NBdXRob3IuYXBwZW5kQ2hpbGQobmV3RG9jQXV0aG9yRGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvY0RldGFpbHMuYXBwZW5kQ2hpbGQobmV3RG9jRGF0ZVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvY0RldGFpbHMuYXBwZW5kQ2hpbGQobmV3RG9jRGV0YWlsU2VwcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvY0RldGFpbHMuYXBwZW5kQ2hpbGQobmV3RG9jQXV0aG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RvY1N1bW1hcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RvY1N1bW1hcnlEYXRhID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaXRlbS5zdW1tYXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2NTdW1tYXJ5LmFwcGVuZENoaWxkKG5ld0RvY1N1bW1hcnlEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RG9jLmFwcGVuZENoaWxkKG5ld0RvY1RpdGxlKVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvYy5hcHBlbmRDaGlsZChuZXdEb2NEZXRhaWxzKVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvYy5hcHBlbmRDaGlsZChuZXdEb2NTdW1tYXJ5KVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvYy5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpdGVtLnVuaXF1ZVVybClcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbHVtbi50aXRsZXMgPiB1bCcpLmFwcGVuZENoaWxkKG5ld0RvYyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFydGljbGVzLWxvYWRpbmcnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgeGh0dHAub3BlbihcIkdFVFwiLCBcIi90YWcvXCIgKyB0YWdOYW1lLCB0cnVlKTtcclxuICAgICAgICB4aHR0cC5zZW5kKCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jb25zdCBhcHAgPSBuZXcgQXBwIl0sInNvdXJjZVJvb3QiOiIifQ==